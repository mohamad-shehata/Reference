#ifdef _MSC_VER
#include <intrin.h>
#define __builtin_popcount __popcnt
#ifdef _WIN64
#define __builtin_popcountll __popcnt64
#else
inline int __builtin_popcountll(__int64 a) {
    return __builtin_popcount((unsigned int)a) + __builtin_popcount(a >> 32);
}
#endif
#endif